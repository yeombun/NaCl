<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>CM31P ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script>
    async function fetchData() {
      try {
        const response = await fetch("data.json?cache=" + Date.now());
        const data = await response.json();
        document.getElementById("time").innerText = data.timestamp;
        document.getElementById("conc").innerText = data.concentration + " ÂµS/cm";
        document.getElementById("temp").innerText = data.temperature + " Â°C";

        Plotly.newPlot("concGraph", [{x: [data.timestamp],y: [data.concentration],mode: 'lines+markers',marker: {color: 'blue'}}], {title: "ë†ë„ (ÂµS/cm)"});
        Plotly.newPlot("tempGraph", [{x: [data.timestamp],y: [data.temperature],mode: 'lines+markers',marker: {color: 'red'}}], {title: "ì˜¨ë„ (Â°C)"});
      } catch (e) {
        console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨", e);
      }
    }
    setInterval(fetchData, 5000);
    window.onload = fetchData;
  </script>
</head>
<body>
  <h1>ğŸŒ¡ï¸ CM31P ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</h1>
  <p><b>ì‹œê°„:</b> <span id="time">-</span></p>
  <p><b>ë†ë„:</b> <span id="conc">-</span></p>
  <p><b>ì˜¨ë„:</b> <span id="temp">-</span></p>
  <div id="concGraph" style="width:45%;height:400px;display:inline-block;"></div>
  <div id="tempGraph" style="width:45%;height:400px;display:inline-block;"></div>
</body>
</html>
